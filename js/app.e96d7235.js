(function(t){function e(e){for(var r,o,c=e[0],s=e[1],u=e[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/music-app-test/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"020e":function(t,e,n){t.exports=n.p+"img/music_placeholder.917378d4.png"},"34b0":function(t,e,n){"use strict";var r=n("6bc4"),i=n.n(r);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{class:{loading:t.isLoading}},[n("header-section"),n("songs-container"),n("music-player"),n("comment-box")],1)])},a=[],o=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},c=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"header"},[r("div",{staticClass:"header__inner"},[r("div",{staticClass:"logo"},[r("img",{attrs:{src:n("9d64"),alt:""}})]),r("h1",{staticClass:"title"},[t._v(" Music Maker "),r("strong",[t._v("JAM")])])])])}],s={name:"Header"},u=s,l=n("2877"),d=Object(l["a"])(u,o,c,!1,null,"29768976",null),f=d.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("header",{staticClass:"main-header"},[n("h1",[t._v(" Trending ")]),n("pagination",{attrs:{current:t.currentPage},on:{change:t.changePage}})],1),n("songs-list")],1)},m=[],b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination"},[n("button",{staticClass:"button primary",attrs:{disabled:1===t.current},on:{click:t.prev}},[n("i",{staticClass:"fa fa-chevron-left"})]),n("button",{staticClass:"button primary",attrs:{disabled:2===t.current},on:{click:t.next}},[n("i",{staticClass:"fa fa-chevron-right"})])])},h=[],g=(n("a9e3"),{name:"Pagination",props:{current:{type:Number,default:1}},methods:{prev:function(){this.$emit("change",1)},next:function(){this.$emit("change",2)}}}),y=g,k=Object(l["a"])(y,b,h,!1,null,"396d2ed0",null),v=k.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.tracks&&t.tracks.length?n("ul",{staticClass:"songs-list"},t._l(t.tracks,(function(t,e){return n("li",{key:t.id,staticClass:"songs-list__item"},[n("track-item",{attrs:{info:t,index:e}})],1)})),0):n("div",{staticClass:"placeholder-text"},[t._v(" Oops! Nothing Found! :( ")])},O=[],j=(n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"track-item",class:{player:t.player}},[r("div",{staticClass:"track-item__thumb"},[r("img",{attrs:{src:t.info&&t.info.cover_image_path||n("020e"),alt:t.info&&t.info.name||"Album Art"}})]),r("header",{staticClass:"track-item__header"},[r("player-button",{staticClass:"track-item__button",attrs:{id:t.info&&t.info.id,disabled:!t.info},on:{click:t.toggleAudio}}),r("div",{staticClass:"track-item__title"},[r("h1",{staticClass:"title"},[t._v(" "+t._s(t.info&&t.info.name||"...")+" ")]),r("p",{staticClass:"author"},[t._v(" "+t._s(t.info&&t.info.artist_name||"...")+" ")])]),t.player?t._e():r("div",{staticClass:"track-item__menu"},[r("i",{staticClass:"fa fa-ellipsis-v"})])],1),t._t("default"),r("footer",{staticClass:"track-item__footer"},[r("like-button",{staticClass:"track-item__badge",attrs:{role:"button",count:t._f("showNum")(t.info&&t.info.likes),id:t.info&&t.info.id,isLiked:t.info&&t.info.isLiked,index:t.index}}),r("comment-button",{staticClass:"track-item__badge",attrs:{role:"button",id:t.info&&t.info.id,name:t.info&&t.info.name||"",count:t._f("showNum")(t.info&&t.info.comments),index:t.index}}),r("visits-button",{staticClass:"track-item__badge",attrs:{role:"button",count:t._f("showNum")(t.info&&t.info.plays),index:t.index}})],1)],2)},x=[],P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"player-button",class:{bounce:t.isPlaying},attrs:{type:"button",disabled:t.disabled},on:{click:function(e){return t.$emit("click")}}},[n("i",{staticClass:"fa",class:t.isPlaying?"fa-pause":"fa-play"})])},w=[],T=n("2f62");function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){Object(j["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L={name:"PlayerButton",props:{id:{type:String,default:null},disabled:{type:Boolean,default:!1}},computed:S({},Object(T["b"])(["currentTrack","playing"]),{isPlaying:function(){return!(!this.playing||!this.currentTrack)&&this.id===this.currentTrack.id}})},E=L,D=Object(l["a"])(E,P,w,!1,null,null,null),A=D.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("badge",{class:{liked:t.isLiked},attrs:{icon:"heart"},on:{click:t.toggleLike}},[t._v(" "+t._s(t.label)+" ")])},I=[],N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"badge",on:{click:function(e){return t.$emit("click")}}},[t.icon?n("i",{staticClass:"fa",class:"fa-"+t.icon}):t._e(),t._t("default",[t._v(" "+t._s(t.label)+" ")])],2)},B=[],F={name:"Badge",props:{icon:{type:String,default:null},label:{type:String,default:null}}},J=F,U=Object(l["a"])(J,N,B,!1,null,"36e42cd6",null),H=U.exports,R={name:"badge-mixin",components:{Badge:H},props:{count:{type:[String,Number],default:"-"},id:{type:String,default:null},index:{type:Number,default:null}},computed:{label:function(){return this.count}}},V={name:"Like",mixins:[R],props:{isLiked:{type:Boolean,default:!1}},methods:{toggleLike:function(){this.isLiked?this.$store.dispatch("unLikeTrack",{index:this.index}):this.$store.dispatch("likeTrack",{index:this.index,id:this.id})}}},W=V,z=Object(l["a"])(W,M,I,!1,null,null,null),G=z.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-container"},[n("badge",{attrs:{icon:"comment-alt"},on:{click:t.openComment}},[t._v(" "+t._s(t.label)+" ")])],1)},Y=[],Z=(n("b0c0"),new r["a"]),q=Z,K={name:"Comment",mixins:[R],props:{name:{type:String,default:""}},methods:{openComment:function(){q.$emit("openCommentModal",{id:this.id,title:this.name,index:this.index})}}},Q=K,tt=(n("6266"),Object(l["a"])(Q,X,Y,!1,null,"9163ca20",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("badge",{attrs:{icon:"headphones-alt"}},[t._v(" "+t._s(t.label)+" ")])},rt=[],it={name:"Visits",mixins:[R]},at=it,ot=Object(l["a"])(at,nt,rt,!1,null,"a875aab4",null),ct=ot.exports;function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){Object(j["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var lt={name:"TrackItem",components:{PlayerButton:A,LikeButton:G,CommentButton:et,VisitsButton:ct},props:{info:{type:Object,default:null},player:{type:Boolean,default:!1},index:{type:Number,default:null}},filters:{showNum:function(t){return isNaN(t)?"-":t}},computed:ut({},Object(T["b"])(["currentTrack","playing"])),methods:{toggleAudio:function(){this.currentTrack&&this.currentTrack.id===this.info.id||(this.$store.dispatch("initAudio",{track:this.info,index:this.index}),this.$store.dispatch("increasePlays",{index:this.index})),this.playing?this.$store.dispatch("pause"):this.$store.dispatch("play")}}},dt=lt,ft=Object(l["a"])(dt,C,x,!1,null,null,null),pt=ft.exports;function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(n),!0).forEach((function(e){Object(j["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ht={name:"SongsList",components:{TrackItem:pt},computed:bt({},Object(T["b"])(["tracks"]))},gt=ht,yt=Object(l["a"])(gt,_,O,!1,null,null,null),kt=yt.exports,vt={name:"SongsContainer",components:{SongsList:kt,Pagination:v},data:function(){return{currentPage:1}},methods:{changePage:function(t){var e=this;this.$store.dispatch("getTracks",t).then((function(){e.$store.dispatch("clearAudio"),e.currentPage=t}))}}},_t=vt,Ot=Object(l["a"])(_t,p,m,!1,null,null,null),jt=Ot.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide"}},[t.currentTrack?n("div",{staticClass:"player-container"},[t.percent?n("div",{staticClass:"player-bar"},[n("div",{staticClass:"player-bar__fill",style:{transform:"scaleX("+t.percent+")"}})]):t._e(),n("track-item",{attrs:{info:t.currentTrack,index:t.currentTrackIndex,player:""}})],1):t._e()])},xt=[];function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(n),!0).forEach((function(e){Object(j["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Tt={name:"Player",components:{TrackItem:pt},data:function(){return{percent:0}},computed:wt({},Object(T["b"])(["currentTrack","audio","currentTrackIndex"])),watch:{audio:function(t){var e=this;t&&(this.audio.addEventListener("play",(function(){e.audio&&(e.percent=0)})),this.audio.addEventListener("timeupdate",(function(){e.audio&&(e.percent=e.audio.currentTime/e.audio.duration)})),this.audio.addEventListener("ended",(function(){e.audio&&e.$store.commit("setPlayingStatus",!1)})))}}},$t=Tt,St=(n("34b0"),Object(l["a"])($t,Ct,xt,!1,null,"3029484f",null)),Lt=St.exports,Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{ref:"comment",staticClass:"comment-modal",attrs:{title:t.title},on:{close:t.clearComment}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.postComment(e)}}},[n("div",{staticClass:"field"},[n("label",{attrs:{for:"comment"}},[t._v(" "+t._s(t.label)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{name:"comment",id:"comment",cols:"30",rows:"7"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),n("button",{staticClass:"button primary",attrs:{type:"submit"}},[t._v(" Send ")])])])},Dt=[],At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[t.show?n("div",{staticClass:"modal-overlay"},[n("div",{staticClass:"modal"},[n("header",{staticClass:"modal__header"},[t.title?n("h1",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")]):t._e(),n("i",{staticClass:"modal__close fa fa-times",on:{click:t.close}})]),n("div",{staticClass:"modal__body"},[t._t("default")],2)])]):t._e()])},Mt=[],It={name:"Modal",props:{title:{type:String,default:null}},data:function(){return{show:!1}},methods:{close:function(){this.$emit("close"),this.show=!1},open:function(){this.$emit("open"),this.show=!0}}},Nt=It,Bt=(n("a449"),Object(l["a"])(Nt,At,Mt,!1,null,"c196f4ba",null)),Ft=Bt.exports,Jt={name:"CommentBox",components:{Modal:Ft},data:function(){return{comment:"",title:"",id:"",index:""}},created:function(){var t=this;q.$on("openCommentModal",(function(e){var n=e.id,r=e.title,i=e.index;t.title=r,t.id=n,t.index=i,t.openComment()}))},computed:{label:function(){return'What do you think about "'.concat(this.title,'"?')}},methods:{openComment:function(){this.$refs.comment.open()},closeComment:function(){this.$refs.comment.close()},clearComment:function(){this.comment=""},postComment:function(){var t=this;this.$store.dispatch("commentTrack",{id:this.id,type:this.comment}).then((function(){t.$store.dispatch("increaseComments",{index:t.index}),t.closeComment()}))}}},Ut=Jt,Ht=Object(l["a"])(Ut,Et,Dt,!1,null,null,null),Rt=Ht.exports,Vt={name:"app",components:{HeaderSection:f,SongsContainer:jt,MusicPlayer:Lt,CommentBox:Rt},data:function(){return{isLoading:!0}},created:function(){var t=this;this.$store.dispatch("getTracks").then((function(){t.isLoading=!1}))}},Wt=Vt,zt=(n("5c0b"),Object(l["a"])(Wt,i,a,!1,null,null,null)),Gt=zt.exports,Xt=(n("d81d"),n("bc3a")),Yt=n.n(Xt),Zt=Yt.a.create({baseURL:"https://api-stg.jam-community.com"}),qt=(n("13d5"),function(t){return Object.keys(t).reduce((function(e,n){return e.append(n,t[n]),e}),new FormData)}),Kt="___agAFTxkmMIWsmN9zOpM_6l2SkZPPy21LGRlxhYD8",Qt={getList:function(t){var e=t.page;return Zt.get("/song/trending/"+e)},like:function(t){return Zt.post("/interact/like",qt(t),{params:{apikey:Kt}})},comment:function(t){return Zt.post("/interact/like",qt(t),{params:{apikey:Kt}})}};r["a"].use(T["a"]);var te=new T["a"].Store({state:{tracks:[],currentTrack:null,currentTrackIndex:null,playing:!1,audio:null},getters:{tracks:function(t){return t.tracks},playing:function(t){return t.playing},currentTrack:function(t){return t.currentTrack},currentTrackIndex:function(t){return t.currentTrackIndex},audio:function(t){return t.audio}},mutations:{setTracks:function(t,e){t.tracks=e.map((function(t){return r["a"].set(t,"isLiked",!1),t}))},setCurrentTrack:function(t,e){t.currentTrack=e},setCurrentTrackIndex:function(t,e){t.currentTrackIndex=e},setPlayingStatus:function(t,e){t.playing=e},setAudio:function(t,e){t.audio=e?new Audio(e.music_file_path):null},setLike:function(t,e){r["a"].set(t.tracks[e],"isLiked",!0),r["a"].set(t.tracks[e],"likes",t.tracks[e].likes+1)},setUnlike:function(t,e){r["a"].set(t.tracks[e],"isLiked",!1),r["a"].set(t.tracks[e],"likes",t.tracks[e].likes-1)},addPlayCount:function(t,e){r["a"].set(t.tracks[e],"plays",t.tracks[e].plays+1)},addCommentCount:function(t,e){r["a"].set(t.tracks[e],"comments",t.tracks[e].comments+1)}},actions:{getTracks:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Qt.getList({page:n}).then((function(t){e("setTracks",t.data)}))},increasePlays:function(t,e){var n=t.commit,r=e.index;n("addPlayCount",r)},increaseComments:function(t,e){var n=t.commit,r=e.index;n("addCommentCount",r)},likeTrack:function(t,e){var n=t.commit,r=e.index,i=e.id;return n("setLike",r),Qt.like({id:i})},unLikeTrack:function(t,e){var n=t.commit,r=e.index;n("setUnlike",r)},commentTrack:function(t,e){return Qt.comment({id:e.id,type:e.type})},initAudio:function(t,e){var n=t.commit,r=t.dispatch,i=e.track,a=e.index;r("pause"),n("setCurrentTrack",i),n("setCurrentTrackIndex",a),n("setAudio",i)},clearAudio:function(t){var e=t.commit,n=t.dispatch;n("pause"),e("setCurrentTrack",null),e("setCurrentTrackIndex",null),e("setAudio",null)},play:function(t){var e=t.commit,n=t.state;n.audio&&n.audio.paused&&(n.audio.play(),e("setPlayingStatus",!0))},pause:function(t){var e=t.commit,n=t.state;n.audio&&!n.audio.paused&&(n.audio.pause(),e("setPlayingStatus",!1))}}});n("becf");r["a"].config.productionTip=!1,new r["a"]({store:te,render:function(t){return t(Gt)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var r=n("9c0c"),i=n.n(r);i.a},6266:function(t,e,n){"use strict";var r=n("7b04"),i=n.n(r);i.a},"6bc4":function(t,e,n){},"7b04":function(t,e,n){},"9c0c":function(t,e,n){},"9d64":function(t,e,n){t.exports=n.p+"img/logo.7c7bc018.png"},a449:function(t,e,n){"use strict";var r=n("c43a"),i=n.n(r);i.a},c43a:function(t,e,n){}});
//# sourceMappingURL=app.e96d7235.js.map